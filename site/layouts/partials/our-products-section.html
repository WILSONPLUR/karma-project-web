{{ $category := "politni-steky" }} {{ $context := . }} {{ if isset . "category"
}} {{ $category = .category }} {{ end }} {{ if isset . "context" }} {{ $context
= .context }} {{ end }} {{ if isset $context.Params "category" }} {{ $category =
$context.Params.category }} {{ end }} {{/* Get products from content files
instead of data files */}} {{ $products := where $context.Site.RegularPages
"Section" "catalog" }} {{ $categoryProducts := where $products
".Params.category" $category }} {{ $categoryData := index
$context.Site.Data.products.categories $category }}
<section
  class="relative flex flex-col justify-center items-center gap-[20px] py-[60px] max-[450px]:pt-[90px] bg-[#f9f9f9] overflow-hidden">
{{ if $context.IsHome }}
<div
  class="absolute top-0 right-[-22px] max-[767px]:right-[-41px] max-[767px]:top-[calc(var(--spacing)*-32)] max-[450px]:right-[-15px] max-[450px]:top-[calc(var(--spacing)*-19)]">
  {{ $bgEl1 := resources.Get "img/bg-el-slider.png" }} {{ if $bgEl1 }} {{
  $bgEl1Processed := $bgEl1.Resize "455x417 webp q75" }}
  <img src="{{ $bgEl1Processed.RelPermalink }}" alt="" aria-hidden="true" width="455" height="417"
    class="w-[455px] h-[417px] max-[1199px]:w-[313px] max-[1199px]:h-[287px] max-[1100px]:w-[350px] max-[1100px]:h-[330px] max-[900px]:w-[300px] max-[900px]:h-[280px] max-[768px]:w-[313px] max-[768px]:h-[387px] max-[450px]:w-[200px] max-[450px]:h-[200px] object-contain"
    loading="lazy" />
  {{ else }}
  <img src="/img/bg-el-slider.png" alt="" aria-hidden="true" width="455" height="417"
    class="w-[455px] h-[417px] max-[1199px]:w-[313px] max-[1199px]:h-[287px] max-[1100px]:w-[350px] max-[1100px]:h-[330px] max-[900px]:w-[300px] max-[900px]:h-[280px] max-[768px]:w-[313px] max-[768px]:h-[387px] max-[450px]:w-[200px] max-[450px]:h-[200px] object-contain"
    loading="lazy" />
  {{ end }}
</div>
{{ end }}

  <div class="flex flex-col w-full max-w-[1200px] products-slider">
    <h2 class="font-['Unbounded'] text-[clamp(24px,4vw,40px)] font-medium mb-[40px] text-center hero-title">
      <span class="text-[#ba0108]">Н</span>АШІ ТОВАРИ 
    </h2>

    <!-- Desktop & Tablet Layout (768px+) -->
    <div class="hidden min-[768px]:block relative">
      <div class="swiper-container-products">
        <div class="swiper-wrapper">
          {{ range $categoryProducts }}
          <div class="swiper-slide">
            <div
              class="bg-[#fff] rounded-[10px] p-[20px] [box-shadow:0_4px_16px_rgba(0,_0,_0,_0.1)] w-full max-w-[400px] text-center mx-0">
              {{ $productImage := resources.Get .Params.image }} {{ if
              $productImage }} {{ $productImageProcessed := $productImage.Resize
              "400x300 webp q85" }}
              <img src="{{ $productImageProcessed.RelPermalink }}" alt="{{ .Title }}" width="400" height="300"
                class="w-full h-[300px] object-contain" loading="lazy" />
              {{ else }}
              <img src="{{ .Params.image }}" alt="{{ .Title }}" width="400" height="300"
                class="w-full h-[300px] object-contain" loading="lazy" />
              {{ end }}
              <h3
                class="product-title font-['Montserrat'] text-[clamp(20px,2.5vw,24px)] uppercase font-bold mt-[15px] mx-[37px] mb-[20px] text-[#020303] leading-[1.2] text-center break-words">
                {{ .Title }}
              </h3>
              <div
                class="text-left space-y-[8px] grid grid-cols-[auto_1fr] gap-x-[20px] max-[1000px]:gap-x-[16px] max-[940px]:gap-x-[14px] max-[768px]:gap-x-[12px] max-[480px]:gap-x-[8px] gap-y-[8px]">
                {{ range .Params.specs }}
                <span class="text-[16px] font-['Montserrat'] font-semibold text-[#000] whitespace-nowrap">
                  {{ .label }}
                </span>
                <span
                  class="text-[16px] font-['Montserrat'] font-normal text-[#000] whitespace-nowrap overflow-hidden text-ellipsis">
                  {{ .value }}
                </span>
                {{ end }}
              </div>
              <a href="{{ .Permalink }}"
                class="inline-block bg-[#ba0108] text-[#fff] border-[none] px-[30px] py-[15px] mt-5 rounded-[20px] cursor-pointer text-[clamp(16px,2.2vw,20px)] font-['Montserrat'] font-normal [transition:background-color_0.3s_ease] hover:bg-[#e39599] w-full">
                Детальніше
              </a>
            </div>
          </div>
          {{ end }}
        </div>
      </div>

      <!-- Desktop & Tablet Navigation arrows -->
      <div
        class="swiper-button-prev-custom absolute top-[50%] transform -translate-y-1/2 z-10 cursor-pointer flex items-center justify-center transition-shadow">
        <img src="/img/nav_arrow.svg" alt="navigation prev arrow" class="rotate-180" loading="lazy" />
      </div>
      <div
        class="swiper-button-next-custom absolute top-[50%] transform -translate-y-1/2 z-10 cursor-pointer flex items-center justify-center transition-shadow">
        <img src="/img/nav_arrow.svg" alt="navigation next arrow" loading="lazy" />
      </div>
    </div>

    <!-- Mobile Layout (767px and below) -->
    <div class="block min-[768px]:hidden relative">
      <div class="flex flex-col gap-[20px] items-center">
        {{ range first 2 $categoryProducts }}
        <div class="w-full max-w-[350px]">
          <div
            class="bg-[#fff] rounded-[10px] p-[20px] [box-shadow:0_4px_16px_rgba(0,_0,_0,_0.1)] w-full text-center mx-auto">
            {{ $productImageMobile := resources.Get .Params.image }} {{ if
            $productImageMobile }} {{ $productImageMobileProcessed :=
            $productImageMobile.Resize "350x262 webp q85" }}
            <img src="{{ $productImageMobileProcessed.RelPermalink }}" alt="{{ .Title }}" width="350" height="262"
              class="w-full h-[262px] object-contain mb-[15px]" loading="lazy" />
            {{ else }}
            <img src="{{ .Params.image }}" alt="{{ .Title }}" width="350" height="262"
              class="w-full h-[262px] object-contain mb-[15px]" loading="lazy" />
            {{ end }}
            <h3
              class="font-['Unbounded'] text-[20px] font-medium mt-[15px] mx-[0] mb-[20px] text-[#020303] leading-[1.2]">
              {{ .Title }}
            </h3>
            <div
              class="text-left space-y-[8px] grid grid-cols-[auto_1fr] gap-x-[12px] max-[480px]:gap-x-[18px] gap-y-[8px]">
              {{ range .Params.specs }}
              <span class="text-[15px] font-['Montserrat'] font-semibold text-[#000] whitespace-nowrap">
                {{ .label }}
              </span>
              <span class="text-[14px] font-['Montserrat'] font-normal text-[#000] whitespace-nowrap">
                {{ .value }}
              </span>
              {{ end }}
            </div>
            <a href="{{ .Permalink }}"
              class="inline-block bg-[#ba0108] text-[#fff] border-[none] px-[30px] py-[15px] mt-5 rounded-[20px] cursor-pointer text-[clamp(14px,1.8vw,16px)] font-['Montserrat'] font-normal [transition:background-color_0.3s_ease] hover:bg-[#e39599] w-full">
              Детальніше
            </a>
          </div>
        </div>
        {{ end }}
      </div>
    </div>
  </div>
</section>

<script>
  document.querySelectorAll('.product-title').forEach(title => {
    if (title.textContent.length > 32) {
      title.classList.remove('mx-[37px]');
      title.classList.add('px-2');
    }
  });
</script>